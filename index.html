<!DOCTYPE html>
<html>
<head>
<title>Base Snake üêçüíô</title>
<style>
body {
  background: #00163A;
  margin: 0;
  font-family: Arial, sans-serif;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  color: white;
}

.menu, .game-screen {
  text-align: center;
}

button {
  width: 200px;
  padding: 12px;
  margin: 10px;
  border: none;
  font-size: 18px;
  border-radius: 8px;
  background: #4F8BFF;
  color: white;
  cursor: pointer;
}

button:hover {
  background: #6CA3FF;
}

canvas {
  background: #002B6A;
  border: 3px solid #4F8BFF;
  display: none;
}
</style>
</head>

<body>

<div class="menu" id="menu">
  <h1>üêç Base Snake üíô</h1>
  <button onclick="startGame()">Start</button><br>
  <button onclick="alertInstructions()">Tutorial</button><br>
  <button onclick="connectWallet()">Connect Wallet</button><br>
  <button onclick="showBest()">Best Score</button>
</div>

<div class="game-screen">
  <p>Score: <span id="score">0</span></p>
  <canvas id="game" width="400" height="400"></canvas>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const grid = 20;

let snake, dx, dy, food, score, speed, gameLoop, best;
best = localStorage.getItem("baseSnakeBest") || 0;

const coinImg = new Image();
coinImg.src = "basecoin.png"; // YOU ALREADY UPLOADED THIS ‚úÖ

function initGame() {
  snake = [{x: 160, y: 200}];
  dx = grid; dy = 0;
  food = randomFood();
  score = 0;
  speed = 150;
}

function startGame() {
  document.getElementById("menu").style.display = "none";
  canvas.style.display = "block";
  initGame();
  gameLoop = setInterval(update, speed);
}

function alertInstructions() {
  alert("Move: Arrow Keys or W/A/S/X\nEat Base Coins\nDon't hit walls or yourself!");
}

function connectWallet() {
  alert("Wallet connect coming soon on Base üîµ");
}

function showBest() {
  alert("Best Score: " + best);
}

function randomFood() {
  return {
    x: Math.floor(Math.random()*20)*grid,
    y: Math.floor(Math.random()*20)*grid
  };
}

function drawSnake() {
  snake.forEach((p,i)=>{
    let r = grid/2;
    ctx.beginPath();
    ctx.arc(p.x+r, p.y+r, r-1, 0, Math.PI*2);

    // Glow head
    if(i===0) {
      ctx.shadowColor="#4F8BFF";
      ctx.shadowBlur=15;
      ctx.fillStyle="#4F8BFF";
    } else {
      ctx.shadowColor="#ffffff";
      ctx.shadowBlur=8;
      ctx.fillStyle=i%2===0?"#4F8BFF":"white";
    }
    ctx.fill();

    // Eyes for head
    if(i===0){
      ctx.shadowBlur=0;
      ctx.fillStyle="white";
      let eyeOffset = dx!==0 ? {x:dx>0?6:-6,y:-4} : {x:-4,y:dy>0?6:-6};
      ctx.beginPath();
      ctx.arc(p.x+r+eyeOffset.x, p.y+r+eyeOffset.y, 2.5, 0, Math.PI*2);
      ctx.fill();

      ctx.beginPath();
      ctx.arc(p.x+r-eyeOffset.x, p.y+r-eyeOffset.y, 2.5, 0, Math.PI*2);
      ctx.fill();
    }
  });
}

function drawFood() {
  ctx.drawImage(coinImg, food.x, food.y, grid, grid);
}

function glowEffect(x,y){
  ctx.beginPath();
  ctx.arc(x+10, y+10, 18, 0, Math.PI*2);
  ctx.fillStyle="rgba(79,139,255,0.4)";
  ctx.shadowColor="#4F8BFF";
  ctx.shadowBlur=20;
  ctx.fill();
}

function update() {
  const head = {x: snake[0].x + dx, y: snake[0].y + dy};

  if(head.x<0||head.x>=400||head.y<0||head.y>=400||snake.some(p=>p.x===head.x&&p.y===head.y)) {
    if(score>best) localStorage.setItem("baseSnakeBest", score);
    if(confirm("Game over! Quit?")) location.reload();
    return;
  }

  snake.unshift(head);

  if(head.x===food.x && head.y===food.y){
    score++;
    document.getElementById("score").textContent = score;
    food = randomFood();
    glowEffect(head.x,head.y);
    if(score%5===0){
      speed = Math.max(50, speed-10);
      clearInterval(gameLoop);
      gameLoop = setInterval(update, speed);
    }
  } else snake.pop();

  ctx.clearRect(0,0,400,400);
  drawFood();
  drawSnake();
}

// Keyboard
document.addEventListener("keydown", e=>{
  if(e.key==="ArrowUp"||e.key==="w"&&dy===0) {dx=0;dy=-grid;}
  if(e.key==="ArrowDown"||e.key==="s"&&dy===0) {dx=0;dy=grid;}
  if(e.key==="ArrowLeft"||e.key==="a"&&dx===0) {dx=-grid;dy=0;}
  if(e.key==="ArrowRight"||e.key==="x"&&dx===0) {dx=grid;dy=0;}
});

// Touch Controls
let sX=0,sY=0;
document.addEventListener("touchstart", e=>{
  sX=e.touches[0].clientX;
  sY=e.touches[0].clientY;
});
document.addEventListener("touchmove", e=>{
  let dxT=e.touches[0].clientX-sX;
  let dyT=e.touches[0].clientY-sY;
  if(Math.abs(dxT)>Math.abs(dyT)){
    if(dxT>0&&dx!==-grid) {dx=grid;dy=0;}
    else if(dxT<0&&dx!==grid) {dx=-grid;dy=0;}
  } else {
    if(dyT>0&&dy!==-grid) {dx=0;dy=grid;}
    else if(dyT<0&&dy!==grid) {dx=0;dy=-grid;}
  }
});
</script>
</body>
</html>
